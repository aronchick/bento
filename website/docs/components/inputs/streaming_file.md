---
title: streaming_file
slug: streaming_file
type: input
status: experimental
categories: ["Local"]
---

<!--
     THIS FILE IS AUTOGENERATED!

     To make changes please edit the corresponding source file under internal/impl/<provider>.
-->

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

:::caution EXPERIMENTAL
This component is experimental and therefore subject to change or removal outside of major version releases.
:::
Streaming file input with log rotation and truncation handling

```yml
# Config fields, showing default values
input:
  label: ""
  streaming_file:
    path: /var/log/app.log # No default (required)
    max_buffer_size: 1000
    max_line_size: 1048576
```

Reads from a file continuously with automatic handling of log rotation and truncation.

## Core Features

- **Log Rotation**: Detects when a file is rotated (renamed/recreated) via inode changes and seamlessly switches to the new file
- **Truncation**: Detects when a file is truncated and resets to read from the beginning
- **Position Metadata**: Each message includes file position metadata (path, inode, byte_offset) that can be used with Bento's cache system to implement custom persistence

## Position Tracking

This component exposes file position as metadata on each message. To implement crash recovery, you can:

1. Store the position in a cache on each message
2. On startup, read the cached position and use a processor to filter already-processed lines

This approach keeps the input stateless while enabling persistence through pipeline composition.

## Metadata Fields

Each message includes the following metadata:

- `streaming_file_path` - The file path being read
- `streaming_file_inode` - The file's inode (for rotation detection)
- `streaming_file_offset` - Byte offset where this line started

## Platform Limitations

This component uses fsnotify for file change detection:

- **NFS/Network Filesystems**: fsnotify does not work reliably on NFS or other network filesystems
- **Supported Platforms**: Linux (inotify), macOS (FSEvents), Windows (ReadDirectoryChangesW), BSD variants (kqueue)
- **Container Environments**: Ensure the file path is mounted from the host, not a container-internal path

## Fields

### `path`

Path to the file to read from


Type: `string`  

```yml
# Examples

path: /var/log/app.log
```

### `max_buffer_size`

Maximum number of lines to buffer


Type: `int`  
Default: `1000`  

```yml
# Examples

max_buffer_size: 1000
```

### `max_line_size`

Maximum line size in bytes to prevent OOM


Type: `int`  
Default: `1048576`  

```yml
# Examples

max_line_size: 1048576
```


