---
title: streaming_file
slug: streaming_file
type: input
status: experimental
categories: ["Local"]
---

<!--
     THIS FILE IS AUTOGENERATED!

     To make changes please edit the corresponding source file under internal/impl/<provider>.
-->

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

:::caution EXPERIMENTAL
This component is experimental and therefore subject to change or removal outside of major version releases.
:::
Streaming file input with log rotation and truncation handling

```yml
# Config fields, showing default values
input:
  label: ""
  streaming_file:
    path: /var/log/app.log # No default (required)
    state_dir: /tmp/bento-streaming-file-state
    checkpoint_interval: 100
    max_buffer_size: 1000
    max_line_size: 1048576
```

Reads from a file continuously, similar to 'tail -F', with handling for common log file scenarios.

## Core Features

- **Log Rotation**: Detects when a file is rotated (renamed/recreated) via inode changes and seamlessly switches to the new file
- **Truncation**: Detects when a file is truncated and resets to read from the beginning
- **Position Recovery**: Optionally persists read position to disk for crash recovery

## Position Tracking Trade-off

This component can persist position state to disk via the state_dir option. This differs from Bento's default "no disk persisted state" philosophy but enables resuming from the last position after restarts. If crash recovery is not needed, you may omit state_dir or use a tmpfs mount.

## Platform Limitations

This component uses fsnotify for file change detection:

- **NFS/Network Filesystems**: fsnotify does not work reliably on NFS or other network filesystems
- **Supported Platforms**: Linux (inotify), macOS (FSEvents), Windows (ReadDirectoryChangesW), BSD variants (kqueue)
- **Container Environments**: Ensure the file path is mounted from the host, not a container-internal path

## Delivery Semantics

- Normal operation: effectively exactly-once (position persisted on message acknowledgment)
- After crash/restart: at-least-once (may replay messages since last checkpoint)
- During rotation: position resets to beginning of new file


## Fields

### `path`

Path to the file to read from


Type: `string`  

```yml
# Examples

path: /var/log/app.log
```

### `state_dir`

Directory to store position tracking state


Type: `string`  
Default: `"/tmp/bento-streaming-file-state"`  

```yml
# Examples

state_dir: /tmp/bento-streaming-file-state
```

### `checkpoint_interval`

How often to persist position (in lines)


Type: `int`  
Default: `100`  

```yml
# Examples

checkpoint_interval: 100
```

### `max_buffer_size`

Maximum number of lines to buffer


Type: `int`  
Default: `1000`  

```yml
# Examples

max_buffer_size: 1000
```

### `max_line_size`

Maximum line size in bytes to prevent OOM


Type: `int`  
Default: `1048576`  

```yml
# Examples

max_line_size: 1048576
```


