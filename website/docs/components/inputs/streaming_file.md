---
title: streaming_file
slug: streaming_file
type: input
status: experimental
categories: ["Local"]
---

<!--
     THIS FILE IS AUTOGENERATED!

     To make changes please edit the corresponding source file under internal/impl/<provider>.
-->

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

:::caution EXPERIMENTAL
This component is experimental and therefore subject to change or removal outside of major version releases.
:::
Streaming file input with log rotation and truncation handling

```yml
# Config fields, showing default values
input:
  label: ""
  streaming_file:
    path: /var/log/app.log # No default (required)
    state_dir: /tmp/bento-streaming-file-state
    checkpoint_interval: 100
    max_buffer_size: 1000
    max_line_size: 1048576
```

Reads from a file continuously with automatic handling of log rotation and truncation.

### Core Features

- **Log rotation handling**: Detects when a file is rotated (via inode change) and seamlessly
  switches to the new file
- **Truncation handling**: Detects when a file is truncated and resets position to the beginning
- **Position tracking**: Optionally persists read position to disk for crash recovery

### Position Tracking Trade-off

This component can persist position state to disk via `state_dir`, which differs from
Bento's general "no disk persisted state" philosophy. This trade-off enables crash recovery
for use cases where reprocessing from the beginning is unacceptable. If crash recovery is not
needed, you can use a tmpfs mount for state_dir or accept that a restart will reprocess from
the file's beginning.

### Platform Limitations

This component uses fsnotify for file change detection, which has the following constraints:

- **NFS/network filesystems**: fsnotify does not work reliably on network-mounted filesystems
- **Supported platforms**: Linux, macOS, Windows, BSD (any platform supporting inotify, kqueue, or ReadDirectoryChangesW)
- **Container environments**: When running in containers, ensure the watched file path is
  properly mounted and accessible

### Delivery Semantics

- **Normal operation**: Exactly-once (position persisted after each ack)
- **After crash/restart**: At-least-once (may reprocess messages since last checkpoint)
- **After rotation**: Exactly-once (new file position persisted immediately)


## Fields

### `path`

Path to the file to read from


Type: `string`  

```yml
# Examples

path: /var/log/app.log
```

### `state_dir`

Directory to store position tracking state


Type: `string`  
Default: `"/tmp/bento-streaming-file-state"`  

```yml
# Examples

state_dir: /tmp/bento-streaming-file-state
```

### `checkpoint_interval`

How often to persist position (in lines)


Type: `int`  
Default: `100`  

```yml
# Examples

checkpoint_interval: 100
```

### `max_buffer_size`

Maximum number of lines to buffer


Type: `int`  
Default: `1000`  

```yml
# Examples

max_buffer_size: 1000
```

### `max_line_size`

Maximum line size in bytes to prevent OOM


Type: `int`  
Default: `1048576`  

```yml
# Examples

max_line_size: 1048576
```


